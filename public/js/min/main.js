window.onload=function(){"use strict";var e=new GameState(".js--state");e.switchto("main-menu");var t=new Yell;socket.on("disconnect",function(){e.switchto("main-menu"),t.setText("The game connection has been lost."),t.negative(),t.show()});var n=document.querySelector(".js--main-menu--start");n.onclick=function(t){t.preventDefault(),e.switchto("connecting"),socket.emit("createRoom")};var o=document.querySelector(".js--connecting--ready"),c=document.querySelector(".js--connecting--code"),s=document.querySelector(".js--connecting--players");socket.on("connecting",function(e){c.innerHTML=e}),o.onclick=function(e){e.preventDefault(),socket.emit("readyToStart")},socket.on("connectedPeople",function(e){s.innerHTML=e}),socket.on("switchToSelectVehicle",function(n){n.status?e.switchto("waiting-for-cars"):(t.setText(n.error),t.negative(),t.show())}),socket.on("playersReady",function(t){t.status&&(GameEngine.feedPlayers(t.players),GameEngine.start(),e.switchto("game"))}),socket.on("updateUserVelocity",function(e){e.status&&GameEngine.feedVelocity(e.player)}),socket.on("userUpdateBullets",function(e){e.status&&GameEngine.feedBullets(e.player)});var r=document.querySelector(".js--scoreboard");socket.on("showScore",function(t){if(t.status){e.switchto("scoreboard"),console.log(t.players),r.innerHTML="";var n=[];for(var o in t.players)n.push([o,t.players[o].score]);n.sort(function(e,t){return e[1]+t[1]}),eachNode(n,function(e){var t=createEle(!1,"li");t.innerHTML=e[1],r.appendChild(t)})}})};