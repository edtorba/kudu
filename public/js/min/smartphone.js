window.onload=function(){"use strict";function e(e){e.addEventListener("click",function(e){e.preventDefault(),eachNode(n,function(e){e!=this&&(removeClass(e,"js--select-vehicle--selected"),removeClass(e,"car--selected"))}),hasClass(this,"js--select-vehicle--selected")||(addClass(this,"js--select-vehicle--selected"),addClass(this,"car--selected"))})}var t=new GameState(".js--state");t.switchto("enter-code");{var c=new Yell;new Fullscreen(".js--fullscreen")}socket.on("ownerLeft",function(e){t.switchto("enter-code"),c.setText(e.error),c.negative(),c.show()}),socket.on("disconnect",function(){t.switchto("enter-code"),c.setText("The game connection has been lost."),c.negative(),c.show()});var s=document.querySelector(".js--enter-code--join"),o=document.querySelector(".js--enter-code--code");s.onclick=function(e){e.preventDefault(),isEmpty(o.value)?(c.setText("Bad code"),c.negative(),c.show()):socket.emit("joinRoom",o.value)},socket.on("joinRoomStatus",function(e){e.status?(t.switchto("waiting-for-players"),o.value=""):(c.setText(e.error),c.negative(),c.show())});var n=document.querySelectorAll(".js--select-vehicle");socket.on("switchToSelectVehicle",function(e){if(e.status){var c=0;for(var s in e.cars)n[c].dataset.vehicleName=e.cars[s].name,n[c].querySelector(".js--select-vehicle--name").innerHTML=e.cars[s].name,n[c].querySelector(".js--select-vehicle--armor").innerHTML=e.cars[s].armor,n[c].querySelector(".js--select-vehicle--speed").innerHTML=e.cars[s].speed,n[c].querySelector(".js--select-vehicle--power").innerHTML=e.cars[s].power,c++;t.switchto("select-vehicle")}}),eachNode(n,function(t){e(t)});var r=document.querySelector(".js--select-vehicle--ready");r.onclick=function(e){e.preventDefault;var t=document.querySelector(".js--select-vehicle--selected");t?socket.emit("selectVehicle",t.dataset.vehicleName):(c.setText("Please select vehicle first"),c.negative(),c.show())},socket.on("selectVehicleStatus",function(e){e.status?t.switchto("waiting-for-map"):(c.setText(e.error),c.negative(),c.show())})};